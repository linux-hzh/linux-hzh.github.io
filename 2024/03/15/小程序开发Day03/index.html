<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>小程序开发Day03 | Hexo</title><meta name="author" content="linux-hzh"><meta name="copyright" content="linux-hzh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="小程序开发Day03"><meta name="application-name" content="小程序开发Day03"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="小程序开发Day03"><meta property="og:url" content="https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="导航1.什么是页面导航页面导航指的是页面之间的相互跳转。例如，浏览器中实现页面导航的方式有如下两种: 12&amp;lt;a&amp;gt;链接location.href  2.小程序中实现页面导航的两种方式声明式导航  在页面上声明一个导航组件通过点击组件实现页面跳转  编程式导航  调用小程序的导航 API，实"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="linux-hzh"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="导航1.什么是页面导航页面导航指的是页面之间的相互跳转。例如，浏览器中实现页面导航的方式有如下两种: 12&amp;lt;a&amp;gt;链接location.href  2.小程序中实现页面导航的两种方式声明式导航  在页面上声明一个导航组件通过点击组件实现页面跳转  编程式导航  调用小程序的导航 API，实"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: linux-hzh","link":"链接: ","source":"来源: Hexo","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Hexo',
  title: '小程序开发Day03',
  postAI: '',
  pageFillDescription: '导航, 1.什么是页面导航, 2.小程序中实现页面导航的两种方式, 声明式导航, 1.导航到 tabBar 页面, 2.导航到非 tabBar 页面, 3.后退导航, 编程式导航, 1.导航到 tabBar 页面, 2.导航到非 tabBar 页面, 3.后退导航, 导航传参, 1.声明式导航传参, 2.编程式导航传参, 3.在 onLoad 中接收导航参数, 下拉刷新事件, 1.什么是下拉刷新, 2.启用下拉刷新, 3.配置下拉刷新窗口的样式, 4.监听页面的下拉刷新事件, 5.停止下拉刷新的效果, 上拉触底事件, 1.什么是上拉触底, 2.监听页面的上拉触底事件, 3.配置上拉触底距离, 生命周期, 1.什么是生命周期, 2.生命周期的分类, 3.什么是生命周期函数, 4.生命周期函数的分类, 5.应用的生命周期函数, 6.页面的生命周期函数, WXS 脚本, 1.什么是wxs, 2.wxs 的应用场景, 3.wxs 和JavaScript 的关系, wxs-基本语法, 1.内嵌 wxs 脚本, 2.定义外联的 wxs 脚本, 3.使用外联的 wxs 脚本, wxs的特点, 1.与JavaScript 不同, 2.不能作为组件的事件回调, 3.隔离性, 4.性能好导航什么是页面导航页面导航指的是页面之间的相互跳转例如浏览器中实现页面导航的方式有如下两种链接小程序中实现页面导航的两种方式声明式导航在页面上声明一个导航组件通过点击组件实现页面跳转编程式导航调用小程序的导航实现页面的跳转声明式导航导航到页面页面指的是被配置为的页面在使用组件跳转到指定的页面时需要指定属性和属性其中表示要跳转的页面的地址必须以开头表示跳转的方式必须为示例代码如下导航到消息页面导航到非页面非页面指的是没有被配置为的页面在使用组件跳转到普通的非页面时则需要指定属性和属性其中表示要跳转的页面的地址必须以开头表示跳转的方式必须为示例代码导航到页面注意为了简便在导航到非页面时属性可以省略后退导航如果要后退到上一页面或多级页面则需要指定属性和属性其中的值必须是表示要进行后退导航的值必须是数字表示要后退的层级示例代码如下返回上一页注意为了简便如果只是后退到上一页面则可以省略属性因为其默认值就是编程式导航导航到页面调用方法可以跳转到页面其中参数对象的属性列表如下示例代码如下跳转到消息页面导航到非页面调用方法可以跳转到非的页面其中参数对象的属性列表如下代码示例如下跳转到页面通过编程式导航跳转到页面后退导航调用方法可以返回上一页面或多级页面其中参数对象可选的属性列表如下示例代码如下后退编程式导航后退到上一页面导航传参声明式导航传参组件的属性用来指定将要跳转到的页面的路径同时路径的后面还可以携带参数参数与路径之间使用分隔参数键与参数值用相连不同参数用分隔示例代码如下跳转到页面编程式导航传参调用方法跳转页面时也可以携带参数示例代码如下页面结构跳转到页面通过编程式导航跳转到页面并携带参数在中接收导航参数通过声明式导航传参或编程式导航传参所携带的参数可以直接在事件中直接获取到示例代码如下生命周期函数监听页面加载就是导航传递过来的参数对象下拉刷新事件什么是下拉刷新下拉刷新是移动端的专有名词指的是通过手指在屏幕上的下拉滑动操作从而重新加载页面数据的行为启用下拉刷新启用下拉刷新有两种方式全局开启下拉刷新在的节点中将设置为局部开启下拉刷新在页面的配置文件中将设置为在实际开发中推荐使用第种方式为需要的页面单独开启下拉刷新的效果配置下拉刷新窗口的样式在全局或页面的配置文件中通过和来配置下拉刷新窗口的样式其中用来配置下拉刷新窗口的背景颜色仅支持进制的颜色值用来配置下拉刷新的样式仅支持和监听页面的下拉刷新事件在页面的文件中通过函数即可监听当前页面的下拉刷新事件停止下拉刷新的效果当处理完下拉刷新后下拉刷新的效果会一直显示不会主动消失所有需要手动隐藏效果此时调用可以停止当前页面的下拉刷新上拉触底事件什么是上拉触底上拉触底是移动端的专有名词通过手指在屏幕上的上拉滑动操作从而加载更多数据的行为监听页面的上拉触底事件在页面的文件中通过函数即可监听当前页面的上拉触底事件示例代码如下页面上拉触底事件的处理函数触发了上拉触底的事件配置上拉触底距离上拉触底距离指的是触发上拉触底事件时滚动条距离页面底部的距离可以在全局或页面的配置文件中通过属性来配置上拉触底的距离小程序默认的触底距离是生命周期什么是生命周期生命周期是指一个对象从创建运行销毁的整个阶段强调的是一个时间段生命周期的分类在小程序中生命周期分为两类分别是应用生命周期特指小程序从启动运行销毁的过程页面生命周期特指小程序中每个页面的加载渲染销毁的过程其中页面的生命周期范围较小应用程序的生命周期范围较大如图所示什么是生命周期函数生命周期函数是由小程序框架提供的内置函数会伴随着生命周期自动按次序执行生命周期函数的作用允许程序员在特定的时间点执行某些特定的操作例如页面刚加载的时候可以在生命周期函数中初始化页面的数据注意生命周期函数强调的是时间点生命周期强调的是时间段生命周期函数的分类小程序中的生命周期函数分为两类分别是应用的生命周期函数特指小程序从启动运行销毁期间依次调用的那些函数页面的生命周期函数特指小程序中每个页面从加载渲染销毁期间依次调用的那些函数应用的生命周期函数小程序的应用生命周期函数需要在中进行声明示例代码如下文件小程序初始化完成时执行此函数全局只触发一次可以做一些初始化的工作小程序启动或从后台进入前台显示时触发小程序从前台进入后台时触发页面的生命周期函数小程序的页面生命周期函数需要在页面的文件中进行声明示例代码如下页面的文件监听页面加载一个页面只调用次监听页面显示监听页面初次渲染完成一个页面只调用次监听页面隐藏监听页面卸载一个页面只调用次脚本什么是是小程序独有的一套脚本语言结合可以构建出页面的结构的应用场景中无法调用在页面的中定义的函数但是中可以调用中定义的函数因此小程序中的典型应用场景就是过滤器和的关系虽然的语法类似于但是和是完全不同的两种语言有自己的数据类型数值类型字符串类型布尔类型对象类型日期类型正则函数类型数组类型不支持类似于及以上的语法形式不支持解构赋值展开运算符箭头函数对象属性简写支持定义变量普通函数等类似于的语法遵循规范对象函数对象基本语法内嵌脚本代码可以编写在文件中的标签内就像代码可以编写在文件中的标签内一样文件中的每个标签必须提供属性用来指定当前的模块名称方便在中访问模块中的成员将文本转为大写形式定义外联的脚本代码还可以编写在以为后缀名的文件内就像代码可以编写在以为后缀名的文件中一样示例代码如下文件使用外联的脚本在中引入外联的脚本时必须为标签添加和属性其中用来指定模块的名称用来指定要引入的脚本的路径且必须是相对路径示例代码如下调用模块中的方法引用外联的脚本并命名为的特点与不同为了降低的学习成本语言在设计时借大量鉴了的语法但是本质上和是完全不同的两种语言不能作为组件的事件回调典型的应用场景就是过滤器经常配合语法进行使用但是在中定义的函数不能作为组件的事件回调函数隔离性隔离性指的是的运行环境和其他代码是隔离的体现在如下两方面不能调用中定义的函数不能调用小程序提供的性能好在设备上小程序内的会比代码快倍在设备上二者的运行效率无差异',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-16 14:50:10',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Hexo</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/images/wechatAndzhifubao/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="/images/wechatAndzhifubao/wechat.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/wechatAndzhifubao/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/images/wechatAndzhifubao/zhifubao.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url">微信小程序</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">小程序开发Day03</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-03-15T06:30:00.000Z" title="发表于 2024-03-15 14:30:00">2024-03-15</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-03-16T06:50:10.378Z" title="更新于 2024-03-16 14:50:10">2024-03-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/"><header><a class="post-meta-categories" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url">微信小程序</a><h1 id="CrawlerTitle" itemprop="name headline">小程序开发Day03</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">linux-hzh</span><time itemprop="dateCreated datePublished" datetime="2024-03-15T06:30:00.000Z" title="发表于 2024-03-15 14:30:00">2024-03-15</time><time itemprop="dateCreated datePublished" datetime="2024-03-16T06:50:10.378Z" title="更新于 2024-03-16 14:50:10">2024-03-16</time></header><h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><h3 id="1-什么是页面导航"><a href="#1-什么是页面导航" class="headerlink" title="1.什么是页面导航"></a>1.什么是页面导航</h3><p>页面导航指的是页面之间的相互跳转。例如，浏览器中实现页面导航的方式有如下两种:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a&gt;链接</span><br><span class="line">location.href</span><br></pre></td></tr></table></figure>

<h3 id="2-小程序中实现页面导航的两种方式"><a href="#2-小程序中实现页面导航的两种方式" class="headerlink" title="2.小程序中实现页面导航的两种方式"></a>2.小程序中实现页面导航的两种方式</h3><p>声明式导航</p>
<blockquote>
<p>在页面上声明一个<navigator>导航组件通过点击<navigator>组件实现页面跳转</p>
</blockquote>
<p>编程式导航</p>
<blockquote>
<p>调用小程序的导航 API，实现页面的跳转</p>
</blockquote>
<h3 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h3><h5 id="1-导航到-tabBar-页面"><a href="#1-导航到-tabBar-页面" class="headerlink" title="1.导航到 tabBar 页面"></a>1.导航到 tabBar 页面</h5><p>tabBar 页面指的是被配置为 tabBar 的页面。<br>在使用<navigator>组件跳转到指定的 tabBar 页面时，需要指定 <font color="red">url</font>属性和 <font color="red">open-type</font> 属性，其中:<br>url表示要跳转的<font color="red">页面的地址</font>，必须以&#x2F;开头<br>open-type 表示<font color="red">跳转的方式</font>，必须为switchTab<br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;/pages/message/message&quot; open-type=&quot;switchTab&quot;&gt;导航到消息页面&lt;/navigator&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-导航到非-tabBar-页面"><a href="#2-导航到非-tabBar-页面" class="headerlink" title="2.导航到非 tabBar 页面"></a>2.导航到非 tabBar 页面</h5><p>非 tabBar 页面指的是没有被配置为 tabBar 的页面。</p>
<blockquote>
<p>在使用 <navigator>组件跳转到普通的非 tabBar 页面时，则需要指定 url属性和 open-type 属性，其中:<br><font color="red">url表示要跳转的页面的地址，必须以&#x2F;开头<br>open-type 表示跳转的方式，必须为navigate</font></p>
</blockquote>
<p>示例代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;/pages/info/info&quot; open-type=&quot;navigate&quot;&gt;导航到info页面&lt;/navigator&gt;</span><br></pre></td></tr></table></figure>
<p><font color="red">注意</font>:为了简便，在导航到非 tabBar 页面时，open-type&#x3D;”navigate”属性可以省略</p>
<h5 id="3-后退导航"><a href="#3-后退导航" class="headerlink" title="3.后退导航"></a>3.后退导航</h5><p>如果要后退到上一页面或多级页面，则需要指定open-type 属性和 delta 属性，其中:</p>
<blockquote>
<p><font color="red">open-type</font> 的值必须是 <font color="red">navigateBack</font>，表示要进行后退导航<br><font color="red">delta</font> 的值必须是<font color="red">数字</font>，表示要后退的层级</p>
</blockquote>
<p>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator open-type=&#x27;navigateBack&#x27; delta=&#x27;1&#x27;&gt;返回上一页&lt;/navigator&gt;</span><br></pre></td></tr></table></figure>

<p><font color="red">注意: </font>为了简便，如果只是后退到上一页面，则<font color="red">可以省略delta属性</font>，因为其<font color="red">默认值就是 1</font>。</p>
<hr>
<h3 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h3><h5 id="1-导航到-tabBar-页面-1"><a href="#1-导航到-tabBar-页面-1" class="headerlink" title="1.导航到 tabBar 页面"></a>1.导航到 tabBar 页面</h5><p>调用 <font color="red">wx.switchTab</font>(0bject object)方法，可以跳转到 tabBar 页面。其中 Object <font color="red">参数对象</font>的属性列表如下:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/Day03/Object%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E6%96%B9%E6%B3%95.png" alt="Object参数对象属性列表"><br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bindtap=&quot;gotoMessage&quot;&gt;跳转到消息页面&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">gotoMessage()&#123;</span><br><span class="line">    wx.switchTab(&#123;</span><br><span class="line">        url: &#x27;/pages/message/message&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-导航到非-tabBar-页面-1"><a href="#2-导航到非-tabBar-页面-1" class="headerlink" title="2.导航到非 tabBar 页面"></a>2.导航到非 tabBar 页面</h5><p>调用 wx.navigateTo(0biect obiect)方法，可以跳转到非 tabBar 的页面。其中 Object 参数对象的属性列表如下:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/Day03/Object%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8.png" alt="Object属性列表"></p>
<p>代码示例如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bindtap=&quot;gotoInfo&quot;&gt;跳转到info页面&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">//通过编程式导航，跳转到 info 页面</span><br><span class="line">gotoInfo()&#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/info/info&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-后退导航-1"><a href="#3-后退导航-1" class="headerlink" title="3.后退导航"></a>3.后退导航</h5><p>调用 wx.navigateBack(0bject object)方法，可以返回上一页面或多级页面。其中 0bject 参数对象可选的<br>属性列表如下:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/Day03/%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA.png" alt="后退导航属性列表"><br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bindtap=&quot;gotoBack&quot;&gt;后退&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">//编程式导航，后退到上一页面</span><br><span class="line">gotoBack()&#123;</span><br><span class="line">    wx.navigateBack(&#123;</span><br><span class="line">        delta: 1</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="导航传参"><a href="#导航传参" class="headerlink" title="导航传参"></a>导航传参</h3><h5 id="1-声明式导航传参"><a href="#1-声明式导航传参" class="headerlink" title="1.声明式导航传参"></a>1.声明式导航传参</h5><p>navigator 组件的 url 属性用来指定将要跳转到的页面的路径。同时，路径的后面还可以携带参数:</p>
<blockquote>
<p><font color="red">参数</font>与<font color="red">路径</font>之间使用?分隔<br><font color="red">参数键</font>与<font color="red">参数值</font>用&#x3D;相连<br><font color="red">不同参数</font>用 <font color="red">&amp;</font> 分隔</p>
</blockquote>
<p>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;/pages/info/info?name=zs&amp;age=20&quot;&gt;跳转到info页面&lt;/navigator&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-编程式导航传参"><a href="#2-编程式导航传参" class="headerlink" title="2.编程式导航传参"></a>2.编程式导航传参</h5><p>调用wx.navigateTo(Object object)方法跳转页面时，也可以携带参数，示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//页面结构</span><br><span class="line">&lt;button bindtap:&quot;gotoInfo2&quot;&gt;跳转到info页面&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">//通过编程式导航,跳转到 info 页面，并携带参数</span><br><span class="line">gotoInfo2()&#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/info/info?name=zs&amp;age=20&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-在-onLoad-中接收导航参数"><a href="#3-在-onLoad-中接收导航参数" class="headerlink" title="3.在 onLoad 中接收导航参数"></a>3.在 onLoad 中接收导航参数</h5><p>通过<font color="red">声明式导航传参</font>或<font color="red">编程式导航传参</font>所携带的参数，可以直接在 <font color="red">onLoad</font> 事件中直接获取到，示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 生命周期函数--监听页面加载</span><br><span class="line">*/</span><br><span class="line">onLoad: function(options)&#123;</span><br><span class="line">    // options 就是导航传递过来的参数对象</span><br><span class="line">    console.log(options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新事件"><a href="#下拉刷新事件" class="headerlink" title="下拉刷新事件"></a>下拉刷新事件</h3><h5 id="1-什么是下拉刷新"><a href="#1-什么是下拉刷新" class="headerlink" title="1.什么是下拉刷新"></a>1.什么是下拉刷新</h5><p><font color="red">下拉刷新</font>是移动端的专有名词，指的是通过手指在屏幕上的下拉滑动操作，从而<font color="red">重新加载页面数据</font>的行为。</p>
<h5 id="2-启用下拉刷新"><a href="#2-启用下拉刷新" class="headerlink" title="2.启用下拉刷新"></a>2.启用下拉刷新</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启用下拉刷新有两种方式:</span><br><span class="line">    全局开启下拉刷新</span><br><span class="line">        在 app.json 的 window 节点中，将enablePullDownRefresh 设置为 true</span><br><span class="line">    局部开启下拉刷新</span><br><span class="line">        在页面的 .json 配置文件中，将 enablePullDownRefresh 设置为 true</span><br></pre></td></tr></table></figure>
<p>在实际开发中，推荐使用第2种方式，<font color="red">为需要的页面单独开启下拉刷新的效果</font>。</p>
<h5 id="3-配置下拉刷新窗口的样式"><a href="#3-配置下拉刷新窗口的样式" class="headerlink" title="3.配置下拉刷新窗口的样式"></a>3.配置下拉刷新窗口的样式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在全局或页面的 .json 配置文件中，通过 backgroundcolor 和 backgroundTextStyle 来配置下拉刷新窗口的样式，其中:</span><br><span class="line">    backgroundcolor 用来配置下拉刷新窗口的背景颜色，仅支持16 进制的颜色值</span><br><span class="line">    backgroundTextStyle 用来配置下拉刷新 loading 的样式，仅支持 dark 和 light</span><br></pre></td></tr></table></figure>

<h5 id="4-监听页面的下拉刷新事件"><a href="#4-监听页面的下拉刷新事件" class="headerlink" title="4.监听页面的下拉刷新事件"></a>4.监听页面的下拉刷新事件</h5><p>在页面的 .js 文件中，通过 onPullDownRefresh()函数即可监听当前页面的下拉刷新事件</p>
<h5 id="5-停止下拉刷新的效果"><a href="#5-停止下拉刷新的效果" class="headerlink" title="5.停止下拉刷新的效果"></a>5.停止下拉刷新的效果</h5><p>当处理完下拉刷新后，下拉刷新的loading效果会一直显示，不会主动消失，所有需要手动隐藏loading效果。此时，调用wx.stopPullDownRefresh() 可以停止当前页面的下拉刷新。</p>
<h3 id="上拉触底事件"><a href="#上拉触底事件" class="headerlink" title="上拉触底事件"></a>上拉触底事件</h3><h5 id="1-什么是上拉触底"><a href="#1-什么是上拉触底" class="headerlink" title="1.什么是上拉触底"></a>1.什么是上拉触底</h5><p>上拉触底是移动端的专有名词，通过手指在屏幕上的上拉滑动操作，从而加载更多数据的行为。</p>
<h5 id="2-监听页面的上拉触底事件"><a href="#2-监听页面的上拉触底事件" class="headerlink" title="2.监听页面的上拉触底事件"></a>2.监听页面的上拉触底事件</h5><p>在页面的 .js 文件中，通过 onReachBottom()函数即可监听当前页面的上拉触底事件。<br><br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">*  页面上拉触底事件的处理函数</span><br><span class="line">*/</span><br><span class="line">onReachBotton: function()&#123;</span><br><span class="line">    console.log(&#x27;触发了上拉触底的事件&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-配置上拉触底距离"><a href="#3-配置上拉触底距离" class="headerlink" title="3.配置上拉触底距离"></a>3.配置上拉触底距离</h5><p>上拉触底距离指的是触发上拉触底事件时，滚动条距离页面底部的距离。<br>可以在全局或页面的.json配置文件中，通过<font color="red">onReachBottomDistance</font>属性来配置上拉触底的距离。<br>小程序默认的触底距离是50px</p>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><h5 id="1-什么是生命周期"><a href="#1-什么是生命周期" class="headerlink" title="1.什么是生命周期"></a>1.什么是生命周期</h5><p>生命周期(Life Cycle)是指一个对象从创建-&gt;运行 -&gt;销毁的整个阶段强调的是一个时间段。</p>
<h5 id="2-生命周期的分类"><a href="#2-生命周期的分类" class="headerlink" title="2.生命周期的分类"></a>2.生命周期的分类</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在小程序中，生命周期分为两类，分别是:</span><br><span class="line">应用生命周期</span><br><span class="line">    特指小程序从启动 -&gt;运行 -&gt;销毁的过程</span><br><span class="line">页面生命周期</span><br><span class="line">    特指小程序中，每个页面的加载-&gt;渲染 -&gt;销毁的过程</span><br><span class="line">其中，页面的生命周期范围较小，应用程序的生命周期范围较大。</span><br></pre></td></tr></table></figure>
<p>如图所示:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/Day03/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="生命周期"></p>
<h5 id="3-什么是生命周期函数"><a href="#3-什么是生命周期函数" class="headerlink" title="3.什么是生命周期函数"></a>3.什么是生命周期函数</h5><p><font color="red">生命周期函数</font>:是由小程序框架提供的内置函数，会伴随着生命周期，自动按次序执行<br><font color="red">生命周期函数的作用</font>:允许程序员在特定的时间点，执行某些特定的操作。例如，页面刚加载的时候，可以在onLoad 生命周期函数中初始化页面的数据<br><font color="red">注意:生命周期函数强调的是时间点,生命周期强调的是时间段</font></p>
<h5 id="4-生命周期函数的分类"><a href="#4-生命周期函数的分类" class="headerlink" title="4.生命周期函数的分类"></a>4.生命周期函数的分类</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">小程序中的生命周期函数分为两类，分别是:</span><br><span class="line">应用的生命周期函数</span><br><span class="line">    特指小程序从启动 -&gt;运行 -&gt;销毁期间依次调用的那些函数</span><br><span class="line">页面的生命周期函数</span><br><span class="line">    特指小程序中，每个页面从加载-&gt;渲染-&gt;销毁期间依次调用的那些函数</span><br></pre></td></tr></table></figure>

<h5 id="5-应用的生命周期函数"><a href="#5-应用的生命周期函数" class="headerlink" title="5.应用的生命周期函数"></a>5.应用的生命周期函数</h5><p>小程序的应用生命周期函数需要在 app.js 中进行声明。<br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// app.js 文件</span><br><span class="line">App(&#123;</span><br><span class="line">    //小程序初始化完成时，执行此函数，全局只触发一次。可以做一些初始化的工作。</span><br><span class="line">    onLaunch: function(options)&#123;&#125;,</span><br><span class="line">    //小程序启动，或从后台进入前台显示时触发。</span><br><span class="line">    onShow: function(options)&#123;&#125;,</span><br><span class="line">    //小程序从前台进入后台时触发。</span><br><span class="line">    onHide: function()&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="6-页面的生命周期函数"><a href="#6-页面的生命周期函数" class="headerlink" title="6.页面的生命周期函数"></a>6.页面的生命周期函数</h5><p>小程序的页面生命周期函数需要在页面的.js 文件中进行声明<br>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//页面的 .js 文件</span><br><span class="line">Page(&#123;</span><br><span class="line">    onLoad: function(options)&#123;&#125;,    //监听页面加载，一个页面只调用1次</span><br><span class="line">    onShow: function()&#123;&#125;,   //监听页面显示</span><br><span class="line">    onReady: function()&#123;&#125;,  //监听页面初次渲染完成，一个页面只调用1次</span><br><span class="line">    onHide: function()&#123;&#125;,   //监听页面隐藏</span><br><span class="line">    onUnload: function()&#123;&#125;  //监听页面卸载，一个页面只调用1次</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="WXS-脚本"><a href="#WXS-脚本" class="headerlink" title="WXS 脚本"></a>WXS 脚本</h3><h5 id="1-什么是wxs"><a href="#1-什么是wxs" class="headerlink" title="1.什么是wxs"></a>1.什么是wxs</h5><p>WXS(WeiXin Script)是小程序独有的一套脚本语言，结合 WXML，可以构建出页面的结构。</p>
<h5 id="2-wxs-的应用场景"><a href="#2-wxs-的应用场景" class="headerlink" title="2.wxs 的应用场景"></a>2.wxs 的应用场景</h5><p>wxml中无法调用在页面的 .js 中定义的函数，但是，wxml中可以调用 wxs 中定义的函数。因此，小程序中wxs 的典型应用场景就是“过滤器”。</p>
<h5 id="3-wxs-和JavaScript-的关系"><a href="#3-wxs-和JavaScript-的关系" class="headerlink" title="3.wxs 和JavaScript 的关系"></a>3.wxs 和JavaScript 的关系</h5><p>虽然 wxs 的语法类似于JavaScript，但是 wxs 和JavaScript 是完全不同的两种语言:<br>wxs 有自己的数据类型</p>
<figure>number 数值类型、string 字符串类型、boolean 布尔类型、object 对象类型、date 日期类型、regexp 正则、function 函数类型、array 数组类型</figure>
wxs 不支持类似于 ES6 及以上的语法形式
<figure>不支持:let、const、解构赋值、展开运算符、箭头函数、对象属性简写、etc...<br>
支持:var 定义变量、普通 function 函数等类似于 ES5 的语法</figure>
wxs 遵循 Commons 规范
<figure>module 对象<br>
require()函数<br>
module.exports 对象</figure>

<h3 id="wxs-基本语法"><a href="#wxs-基本语法" class="headerlink" title="wxs-基本语法"></a>wxs-基本语法</h3><h5 id="1-内嵌-wxs-脚本"><a href="#1-内嵌-wxs-脚本" class="headerlink" title="1.内嵌 wxs 脚本"></a>1.内嵌 wxs 脚本</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wxs 代码可以编写在 wxml文件中的&lt;wxs&gt;标签内，就像Javascript 代码可以编写在 html文件中的 &lt;script&gt;标签内一样。</span><br><span class="line">wxml文件中的每个&lt;wxs&gt;&lt;/wxs&gt;标签，必须提供 module 属性，用来指定当前 wxs 的模块名称，方便在wxml中访问模块中的成员:</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt; &#123;&#123;m1.toUpper(username)&#125;&#125;&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;wxs module=&quot;m1&quot;&gt;</span><br><span class="line">    //将文本转为大写形式 zs -&gt; ZS</span><br><span class="line">    module.exports.toUpper = function(str)&#123;</span><br><span class="line">        return str.toUpperCase()</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/wxs&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-定义外联的-wxs-脚本"><a href="#2-定义外联的-wxs-脚本" class="headerlink" title="2.定义外联的 wxs 脚本"></a>2.定义外联的 wxs 脚本</h5><p>wxs 代码还可以编写在以.wxs 为后缀名的文件内，就像 javascript 代码可以编写在以 .js 为后缀名的文件中一样。</p>
<p>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// tools.wxs 文件</span><br><span class="line">function toLower(str)&#123;</span><br><span class="line">    return str.toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports=&#123;</span><br><span class="line">    toLower: toLower</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-使用外联的-wxs-脚本"><a href="#3-使用外联的-wxs-脚本" class="headerlink" title="3.使用外联的 wxs 脚本"></a>3.使用外联的 wxs 脚本</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在 wxml 中引入外联的 wxs 脚本时，必须为 &lt;wxs&gt;标签添加 module 和 src 属性，其中:</span><br><span class="line">    module 用来指定模块的名称</span><br><span class="line">    src 用来指定要引入的脚本的路径，且必须是相对路径。</span><br></pre></td></tr></table></figure>

<p>示例代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 调用 m2 模块中的方法 --&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;m2.toLower(country)&#125;&#125;&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 引用外联的 tools.wxs 脚本，并命名为m2 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;wxs src=&quot;../../utils/tools.wxs&quot; module=&quot;m2&quot;&gt;&lt;/wxs&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wxs的特点"><a href="#wxs的特点" class="headerlink" title="wxs的特点"></a>wxs的特点</h3><h5 id="1-与JavaScript-不同"><a href="#1-与JavaScript-不同" class="headerlink" title="1.与JavaScript 不同"></a>1.与JavaScript 不同</h5><p>为了降低 wxs(WeiXin Script)的学习成本，wxs 语言在设计时借大量鉴了JavaScript 的语法。但是本质上wxs 和 JavaScript 是完全不同的两种语言!</p>
<h5 id="2-不能作为组件的事件回调"><a href="#2-不能作为组件的事件回调" class="headerlink" title="2.不能作为组件的事件回调"></a>2.不能作为组件的事件回调</h5><p>wxs 典型的应用场景就是“过滤器”，<font color="red">经常配合 Mustache 语法进行使用</font>。<br>但是，在 wxs 中定义的函数<font color="red">不能作为组件的事件回调函数</font></p>
<h5 id="3-隔离性"><a href="#3-隔离性" class="headerlink" title="3.隔离性"></a>3.隔离性</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">隔离性指的是 wxs 的运行环境和其他JavaScript 代码是隔离的。体现在如下两方面</span><br><span class="line">wxs 不能调用js 中定义的函数</span><br><span class="line">wxs 不能调用小程序提供的 API</span><br></pre></td></tr></table></figure>

<h5 id="4-性能好"><a href="#4-性能好" class="headerlink" title="4.性能好"></a>4.性能好</h5><p>在 ios 设备上，小程序内的 WXS 会比JavaScript 代码快2~20 倍在 android 设备上，二者的运行效率无差异</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">linux-hzh</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/')">小程序开发Day03</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/images/wechatAndzhifubao/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/wechatAndzhifubao/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/wechatAndzhifubao/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/wechatAndzhifubao/zhifubao.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=小程序开发Day03&amp;url=https://linux-hzh.github.io/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://linux-hzh.github.io" target="_blank">Hexo</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/14/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day02/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">小程序开发Day02</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/16/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day04/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">小程序开发Day04</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA"><span class="toc-number">1.</span> <span class="toc-text">导航</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA"><span class="toc-number">1.1.</span> <span class="toc-text">1.什么是页面导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%AE%9E%E7%8E%B0%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2.小程序中实现页面导航的两种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.3.</span> <span class="toc-text">声明式导航</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AF%BC%E8%88%AA%E5%88%B0-tabBar-%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">1.导航到 tabBar 页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%AF%BC%E8%88%AA%E5%88%B0%E9%9D%9E-tabBar-%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">2.导航到非 tabBar 页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA"><span class="toc-number">1.3.0.3.</span> <span class="toc-text">3.后退导航</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.4.</span> <span class="toc-text">编程式导航</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AF%BC%E8%88%AA%E5%88%B0-tabBar-%E9%A1%B5%E9%9D%A2-1"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">1.导航到 tabBar 页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%AF%BC%E8%88%AA%E5%88%B0%E9%9D%9E-tabBar-%E9%A1%B5%E9%9D%A2-1"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">2.导航到非 tabBar 页面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA-1"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">3.后退导航</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">1.5.</span> <span class="toc-text">导航传参</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">1.声明式导航传参</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">2.编程式导航传参</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%9C%A8-onLoad-%E4%B8%AD%E6%8E%A5%E6%94%B6%E5%AF%BC%E8%88%AA%E5%8F%82%E6%95%B0"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">3.在 onLoad 中接收导航参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.6.</span> <span class="toc-text">下拉刷新事件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">1.6.0.1.</span> <span class="toc-text">1.什么是下拉刷新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%90%AF%E7%94%A8%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">1.6.0.2.</span> <span class="toc-text">2.启用下拉刷新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%AA%97%E5%8F%A3%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.6.0.3.</span> <span class="toc-text">3.配置下拉刷新窗口的样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.6.0.4.</span> <span class="toc-text">4.监听页面的下拉刷新事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%81%9C%E6%AD%A2%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E6%95%88%E6%9E%9C"><span class="toc-number">1.6.0.5.</span> <span class="toc-text">5.停止下拉刷新的效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.</span> <span class="toc-text">上拉触底事件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">1.什么是上拉触底</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2%E7%9A%84%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">2.监听页面的上拉触底事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E8%B7%9D%E7%A6%BB"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">3.配置上拉触底距离</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.</span> <span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.0.1.</span> <span class="toc-text">1.什么是生命周期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.8.0.2.</span> <span class="toc-text">2.生命周期的分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.0.3.</span> <span class="toc-text">3.什么是生命周期函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.8.0.4.</span> <span class="toc-text">4.生命周期函数的分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%BA%94%E7%94%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.0.5.</span> <span class="toc-text">5.应用的生命周期函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.0.6.</span> <span class="toc-text">6.页面的生命周期函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WXS-%E8%84%9A%E6%9C%AC"><span class="toc-number">1.9.</span> <span class="toc-text">WXS 脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFwxs"><span class="toc-number">1.9.0.1.</span> <span class="toc-text">1.什么是wxs</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-wxs-%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.9.0.2.</span> <span class="toc-text">2.wxs 的应用场景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-wxs-%E5%92%8CJavaScript-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.9.0.3.</span> <span class="toc-text">3.wxs 和JavaScript 的关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxs-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.10.</span> <span class="toc-text">wxs-基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%86%85%E5%B5%8C-wxs-%E8%84%9A%E6%9C%AC"><span class="toc-number">1.10.0.1.</span> <span class="toc-text">1.内嵌 wxs 脚本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%AE%9A%E4%B9%89%E5%A4%96%E8%81%94%E7%9A%84-wxs-%E8%84%9A%E6%9C%AC"><span class="toc-number">1.10.0.2.</span> <span class="toc-text">2.定义外联的 wxs 脚本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E5%A4%96%E8%81%94%E7%9A%84-wxs-%E8%84%9A%E6%9C%AC"><span class="toc-number">1.10.0.3.</span> <span class="toc-text">3.使用外联的 wxs 脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxs%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.11.</span> <span class="toc-text">wxs的特点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%B8%8EJavaScript-%E4%B8%8D%E5%90%8C"><span class="toc-number">1.11.0.1.</span> <span class="toc-text">1.与JavaScript 不同</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%8D%E8%83%BD%E4%BD%9C%E4%B8%BA%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83"><span class="toc-number">1.11.0.2.</span> <span class="toc-text">2.不能作为组件的事件回调</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%9A%94%E7%A6%BB%E6%80%A7"><span class="toc-number">1.11.0.3.</span> <span class="toc-text">3.隔离性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%80%A7%E8%83%BD%E5%A5%BD"><span class="toc-number">1.11.0.4.</span> <span class="toc-text">4.性能好</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/16/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day04/" title="小程序开发Day04">小程序开发Day04</a><time datetime="2024-03-16T10:30:00.000Z" title="发表于 2024-03-16 18:30:00">2024-03-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day03/" title="小程序开发Day03">小程序开发Day03</a><time datetime="2024-03-15T06:30:00.000Z" title="发表于 2024-03-15 14:30:00">2024-03-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/14/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day02/" title="小程序开发Day02">小程序开发Day02</a><time datetime="2024-03-14T06:30:00.000Z" title="发表于 2024-03-14 14:30:00">2024-03-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/13/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91Day01/" title="小程序开发Day01">小程序开发Day01</a><time datetime="2024-03-13T10:30:00.000Z" title="发表于 2024-03-13 18:30:00">2024-03-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/13/%E8%A7%A3%E5%86%B3Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/" title="解决Tomcat服务器启动乱码问题">解决Tomcat服务器启动乱码问题</a><time datetime="2024-03-13T05:45:04.000Z" title="发表于 2024-03-13 13:45:04">2024-03-13</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 By <a class="footer-bar-link" href="/" title="linux-hzh" target="_blank">linux-hzh</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">2</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("03/12/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 linux-hzh 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="/categories/微信小程序/"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>